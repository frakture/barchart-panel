{"version":3,"sources":["../src/module.js"],"names":[],"mappings":"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","file":"module.js","sourcesContent":["import _ from \"lodash\";\r\nimport {MetricsPanelCtrl} from \"app/plugins/sdk\";\r\nimport kbn from \"app/core/utils/kbn\";\r\nimport TimeSeries from \"app/core/time_series\";\r\nimport legend from './legend';\r\nimport './barchart-panel.css!';\r\nimport $ from \"jquery\";\r\nimport \"jquery.flot\";\r\n\r\nexport class BarChartCtrl extends MetricsPanelCtrl {\r\n\r\n    constructor($scope, $injector, $rootScope) {\r\n        super($scope, $injector);\r\n        this.$rootScope = $rootScope;\r\n\r\n        var panelDefaults = {\r\n            legend: {\r\n                show: true, // disable/enable legend\r\n                values: true\r\n            },\r\n            links: [],\r\n            datasource: null,\r\n            maxDataPoints: 3,\r\n            interval: null,\r\n            targets: [{}],\r\n            cacheTimeout: null,\r\n            nullPointMode: 'connected',\r\n            legendTable: false,\r\n            aliasColors: {},\r\n            format: 'short',\r\n            valueName: 'current',\r\n            yaxis: {\r\n                label: null,\r\n                show: true,\r\n                tickDecimals: 2\r\n            },\r\n            xaxis: {\r\n                show: true\r\n            },\r\n            decimals: 2\r\n        };\r\n\r\n        _.defaults(this.panel, panelDefaults);\r\n        _.defaults(this.panel.legend, panelDefaults.legend);\r\n\r\n        this.events.on('render', this.onRender.bind(this));\r\n        this.events.on('data-received', this.onDataReceived.bind(this));\r\n        this.events.on('data-error', this.onDataError.bind(this));\r\n        this.events.on('data-snapshot-load', this.onDataReceived.bind(this));\r\n        this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\r\n    }\r\n\r\n    onInitEditMode() {\r\n        this.addEditorTab('Axes', 'public/plugins/grafana-barchart-panel/axes.html');\r\n        this.addEditorTab('Options', 'public/plugins/grafana-barchart-panel/editor.html');\r\n        this.unitFormats = kbn.getUnitFormats();\r\n    }\r\n\r\n    setUnitFormat(subItem) {\r\n        this.panel.format = subItem.value;\r\n        this.render();\r\n    }\r\n\r\n    onDataError() {\r\n        this.series = [];\r\n        this.render();\r\n    }\r\n\r\n    onRender() {\r\n        this.data = this.parseSeries(this.series);\r\n    }\r\n\r\n    parseSeries(series) {\r\n        return _.map(this.series, (serie, i) => {\r\n            return {\r\n                label: serie.alias,\r\n                data: serie.flotpairs[0],\r\n                color: this.panel.aliasColors[serie.alias] || this.$rootScope.colors[i]\r\n            };\r\n        });\r\n    }\r\n\r\n    onDataReceived(dataList) {\r\n        this.series = dataList.map(this.seriesHandler.bind(this));\r\n        this.data = this.parseSeries(this.series);\r\n        this.render(this.data);\r\n    }\r\n\r\n    seriesHandler(seriesData) {\r\n        var series = new TimeSeries({\r\n            datapoints: seriesData.datapoints,\r\n            alias: seriesData.target\r\n        });\r\n\r\n        series.flotpairs = series.getFlotPairs(this.panel.nullPointMode);\r\n\r\n        return series;\r\n    }\r\n\r\n    getDecimalsForValue(value) {\r\n        if (_.isNumber(this.panel.decimals)) {\r\n            return {decimals: this.panel.decimals, scaledDecimals: null};\r\n        }\r\n\r\n        var delta = value / 2;\r\n        var dec = -Math.floor(Math.log(delta) / Math.LN10);\r\n\r\n        var magn = Math.pow(10, -dec);\r\n        var norm = delta / magn; // norm is between 1.0 and 10.0\r\n        var size;\r\n\r\n        if (norm < 1.5) {\r\n            size = 1;\r\n        } else if (norm < 3) {\r\n            size = 2;\r\n            // special case for 2.5, requires an extra decimal\r\n            if (norm > 2.25) {\r\n                size = 2.5;\r\n                ++dec;\r\n            }\r\n        } else if (norm < 7.5) {\r\n            size = 5;\r\n        } else {\r\n            size = 10;\r\n        }\r\n\r\n        size *= magn;\r\n\r\n        // reduce starting decimals if not needed\r\n        if (Math.floor(value) === value) {\r\n            dec = 0;\r\n        }\r\n\r\n        var result = {};\r\n        result.decimals = Math.max(0, dec);\r\n        result.scaledDecimals = result.decimals - Math.floor(Math.log(size) / Math.LN10) + 2;\r\n\r\n        return result;\r\n    }\r\n\r\n    formatValue(value) {\r\n        var decimalInfo = this.getDecimalsForValue(value);\r\n        var formatFunc = kbn.valueFormats[this.panel.format];\r\n        if (formatFunc) {\r\n            return formatFunc(value, decimalInfo.decimals, decimalInfo.scaledDecimals);\r\n        }\r\n        return value;\r\n    }\r\n\r\n    link(scope, elem, attrs, ctrl) {\r\n        var data, panel;\r\n\r\n        elem = elem.find('.barchart-panel');\r\n        var $tooltip = $('<div id=\"tooltip\">');\r\n\r\n        ctrl.events.on('render', function () {\r\n            render();\r\n            ctrl.renderingCompleted();\r\n        });\r\n\r\n        function setElementHeight() {\r\n            try {\r\n                var height = ctrl.height || panel.height || ctrl.row.height;\r\n                if (_.isString(height)) {\r\n                    height = parseInt(height.replace('px', ''), 10);\r\n                }\r\n\r\n                height -= 5; // padding\r\n                height -= panel.title ? 24 : 9; // subtract panel title bar\r\n\r\n                elem.css('height', height + 'px');\r\n\r\n                return true;\r\n            } catch (e) { // IE throws errors sometimes\r\n                return false;\r\n            }\r\n        }\r\n\r\n        function processOffsetHook(plot, gridMargin) {\r\n            var left = panel.yaxis;\r\n            var right = panel.yaxis;\r\n            if (left.show && left.label) { gridMargin.left = 20; }\r\n            if (right.show && right.label) { gridMargin.right = 20; }\r\n        }\r\n\r\n        function drawHook(plot) {\r\n             // add left axis labels\r\n            if (panel.yaxis.label) {\r\n                var yaxisLabel = $(\"<div class='axisLabel left-yaxis-label'></div>\")\r\n                    .text(panel.yaxis.label)\r\n                    .appendTo(elem);\r\n\r\n                yaxisLabel[0].style.marginTop = (elem.height() / 6) + 'px';\r\n            }\r\n        }\r\n\r\n        function addBarChart() {\r\n            var width = elem.width();\r\n            var height = elem.height();\r\n\r\n            var size = Math.min(width, height);\r\n\r\n            var plotCanvas = $('<div></div>');\r\n            var plotCss = {\r\n                top: '10px',\r\n                margin: 'auto',\r\n                position: 'relative',\r\n                height: (size - 20) + 'px'\r\n            };\r\n\r\n            plotCanvas.css(plotCss);\r\n\r\n            var $panelContainer = elem.parents('.panel-container');\r\n            var backgroundColor = $panelContainer.css('background-color');\r\n\r\n            elem.html(plotCanvas);\r\n\r\n            var plotSeries = [];\r\n            var plotTicks = [];\r\n            _.map(data, (origData, i) => {\r\n                plotSeries.push({\r\n                                    label: origData.label,\r\n                                    data: [[\r\n                                        i,\r\n                                        origData.data[1]\r\n                                    ]],\r\n                                    color: origData.color,\r\n                                    bars: {\r\n                                        show: true,\r\n                                        align: 'center',\r\n                                        fill: 1,\r\n                                        barWidth: 0.7,\r\n                                        zero: true,\r\n                                        lineWidth: 0\r\n                                    },\r\n                                    xaxis: {\r\n                                        ticks: [i, origData.label]\r\n                                    }\r\n                                });\r\n                plotTicks.push([\r\n                                   i,\r\n                                   origData.label\r\n                               ]);\r\n            });\r\n\r\n            var options = {\r\n                hooks: {\r\n                    draw: [drawHook],\r\n                    processOffset: [processOffsetHook],\r\n                },\r\n                legend: {\r\n                    show: false\r\n                },\r\n                xaxis: {\r\n                    ticks: plotTicks,\r\n                    show: panel.xaxis.show\r\n                },\r\n                yaxis: {\r\n                    show: panel.yaxis.show,\r\n                    tickFormatter: function (val, axis) {\r\n                        return ctrl.formatValue(val);\r\n                    }\r\n                },\r\n                shadowSize: 0,\r\n                grid: {\r\n                    minBorderMargin: 0,\r\n                    markings: [],\r\n                    backgroundColor: backgroundColor,\r\n                    borderWidth: 0,\r\n                    hoverable: true,\r\n                    color: '#c8c8c8',\r\n                    margin: {left: 0, right: 0},\r\n                },\r\n                selection: {\r\n                    mode: \"x\",\r\n                    color: '#666'\r\n                }\r\n            };\r\n\r\n            $.plot(plotCanvas, plotSeries, options);\r\n            plotCanvas.bind(\"plothover\", function (event, pos, item) {\r\n                if (!item) {\r\n                    $tooltip.detach();\r\n                    return;\r\n                }\r\n\r\n                var body;\r\n                var formatted = ctrl.formatValue(item.series.data[0][1]);\r\n\r\n                body = '<div class=\"graph-tooltip-small\"><div class=\"graph-tooltip-time\">';\r\n                body += '<div class=\"graph-tooltip-value\">' + item.series.label + ': ' + formatted;\r\n                body += '</div>';\r\n                body += \"</div></div>\";\r\n                $tooltip.html(body).place_tt(pos.pageX + 20, pos.pageY);\r\n            });\r\n        }\r\n\r\n\r\n        function render() {\r\n            if (!ctrl.data) {\r\n                return;\r\n            }\r\n\r\n            data = ctrl.data;\r\n            panel = ctrl.panel;\r\n\r\n            if (setElementHeight()) {\r\n                addBarChart();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nBarChartCtrl.templateUrl = 'module.html';\r\n\r\nexport {\r\n    BarChartCtrl as PanelCtrl\r\n};\r\n\r\n"]}